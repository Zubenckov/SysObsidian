# üöÄ –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ vESR

## üîë –í—Ö–æ–¥  
```bash
commit # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è  
confirm # –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è  
restore # –û—Ç–º–µ–Ω–∞ –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π  
rollback # –û—Ç–∫–∞—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π  
config # –í—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–ù–ï conf t, –∫–∞–∫ –≤ Cisco)
````

---

```bash
show running-configure # –ü—Ä–æ—Å–º–æ—Ç—Ä –æ–±—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫  
show ip interfaces # –ü—Ä–æ—Å–º–æ—Ç—Ä IP-–∞–¥—Ä–µ—Å–æ–≤ –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö
show interfaces status # –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤  
show netflow statistics # –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ netflow 
````

---
## üè∑ –ë–∞–Ω–Ω–µ—Ä—ã

```bash
banner login "Unauthorized connection is prosecuted by the law of the Russian Federation" # –ë–∞–Ω–Ω–µ—Ä –¥–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
banner exec "Hello! This is a vESR!" # –ë–∞–Ω–Ω–µ—Ä –ø–æ—Å–ª–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏  
```

---
## üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

```bash
username <name> # –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
	password <pas>  # –ó–∞–¥–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è  
	privilege <‚Ññ_1-15> # –£—Ä–æ–≤–µ–Ω—å –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π (10-14 ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã, –Ω–æ –Ω–µ –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø)  
exit # –í—ã—Ö–æ–¥  
```

---
## üåê IP –ê–¥—Ä–µ—Å–∞—Ü–∏—è

```bash
interface <int_name> # –ü–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞  
	description "<–æ–ø–∏—Å–∞–Ω–∏–µ>" # –û–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–¥–æ 31 —Å–∏–º–≤–æ–ª–∞)  
	ip firewall disable # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ firewall  
	ip address <ip>/<prefix> # –ó–∞–¥–∞–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–∞ (–ø—Ä–∏–º–µ—Ä: 192.168.0.0/32)
	ip netflow export # –í–∫–ª—é—á–∞–µ–º —Å–±–æ—Ä —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ netflow
```

---
## üåç IPv6

```bash
ipv6 enable # –í–∫–ª—é—á–µ–Ω–∏–µ IPv6 –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ  
ipv6 address <ipv6>/<prefix> # –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ IPv6-–∞–¥—Ä–µ—Å–∞ –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  
```

---
## üöè –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —à–ª—é–∑–∞

```bash
ip route <—Å–µ—Ç—å>/<–ø—Ä–µ—Ñ–∏–∫—Å> <ip_next_hop> # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ IPv4  
ipv6 route <–ø—Ä–µ—Ñ–∏–∫—Å>/<—Å–µ—Ç—å> <ipv6_next_hop> # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ IPv6  
```

---
## üì° –ù–∞—Å—Ç—Ä–æ–π–∫–∞ NAT

```bash
# –°–æ–∑–¥–∞–µ–º –≥—Ä—É–ø–ø—É –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π
object-group network LOCAL_NET
	ip address-range 192.168.0.1-192.168.0.254
	ip address-range 192.168.1.1-192.168.1.254
exit

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º –ø—É–ª –¥–ª—è SNAT —Å –≤–Ω–µ—à–Ω–∏–º IP
nat source
	pool WAN_POOL
		ip address-range 10.0.2.15
	exit
exit

# –°–æ–∑–¥–∞–µ–º –ø—Ä–∞–≤–∏–ª–∞ SNAT
nat source
	ruleset SNAT
		to interface gi1/0/2
		rule 1
			match source-address LOCAL_NET
			action source-nat pool WAN_POOL
			enable
		exit
	exit
exit

# –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
# –í –ø—Ä–∏–≤–µ–ª–∏–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ (#)
commit
confirm
```

---
## üîó –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GRE-—Ç—É–Ω–Ω–µ–ª—è

```bash
interface Tunnel0 # –°–æ–∑–¥–∞–Ω–∏–µ —Ç—É–Ω–Ω–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ 
	ip address <ip>/<prefix> # –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–∞ 
	tunnel source <source_ip> # –£–∫–∞–∑–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ IP
	tunnel destination <dest_ip> # –£–∫–∞–∑–∞–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–≥–æ IP
exit
commit # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π  
confirm # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è  
```

---
### üí® –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Netflow

```bash
netflow collector [–∞–¥—Ä–µ—Å] # –£–∫–∞–∑—ã–≤–∞–µ–º IP-–ê–¥—Ä–µ—Å –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞
int gi1/0/1 # –í–∫–ª—é—á–∞–µ–º —Å–±–æ—Ä —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ netflow
	ip netflow export
netflow enable # –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º Netflow –Ω–∞ –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–µ
```

---

